import { Table } from '@/components/Table'

# NetworkGatewaysProvider

## Overview

The `NetworkGatewaysProvider` discovers AR.IO gateways from the AR.IO Network using the AR.IO SDK. It provides dynamic access to the full network of verified gateways, making it the recommended choice for production applications.

> **Tip:** To avoid rate limits and improve performance, consider wrapping `NetworkGatewaysProvider` with [`SimpleCacheGatewaysProvider`](/wayfinder/core/gateway-providers/cache) (for Node.js/server environments) or [`LocalStorageGatewaysProvider`](/wayfinder/core/gateway-providers/cache) (for browser environments). This enables caching of gateway lists and reduces unnecessary network requests.

## Basic Usage

```javascript
import { NetworkGatewaysProvider } from '@ar.io/wayfinder-core'
import { ARIO } from '@ar.io/sdk'

// use the top 10 gateways based on operator stake
const provider = new NetworkGatewaysProvider({
  ario: ARIO.mainnet(),
  sortBy: 'operatorStake',
  sortOrder: 'desc',
  limit: 10,
})

const gateways = await provider.getGateways()
console.log('Top gateways:', gateways)
```

## Configuration Options

### NetworkGatewaysProviderOptions

```typescript
interface NetworkGatewa {
  ario: ARIO
  sortBy: 'operatorStake' | 'totalDelegatedStake' | 'startTimestamp'
  sortOrder: 'desc'
  limit: 10 // only consider the first 10 returned
  blocklist: string[]
  filter: () => boolean // any filter predicate to filter certain gateways
}
```

### Parameters

<Table>
  <Table.Head>
    <Table.Row>
      <Table.Header>Parameter</Table.Header>
      <Table.Header>Type</Table.Header>
      <Table.Header>Default</Table.Header>
      <Table.Header>Description</Table.Header>
    </Table.Row>
  </Table.Head>
  <Table.Body>
    <Table.Row>
      <Table.Cell>ario</Table.Cell>
      <Table.Cell>ARIO</Table.Cell>
      <Table.Cell>Required</Table.Cell>
      <Table.Cell>AR.IO SDK instance (mainnet/testnet)</Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell>minStake</Table.Cell>
      <Table.Cell>number</Table.Cell>
      <Table.Cell>0</Table.Cell>
      <Table.Cell>Minimum stake required (in mIO tokens)</Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell>maxGateways</Table.Cell>
      <Table.Cell>number</Table.Cell>
      <Table.Cell>100</Table.Cell>
      <Table.Cell>Maximum number of gateways to return</Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell>includeOperatorStake</Table.Cell>
      <Table.Cell>boolean</Table.Cell>
      <Table.Cell>true</Table.Cell>
      <Table.Cell>Include operator stake in calculations</Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell>includeDelegatedStake</Table.Cell>
      <Table.Cell>boolean</Table.Cell>
      <Table.Cell>true</Table.Cell>
      <Table.Cell>Include delegated stake in calculations</Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell>sortBy</Table.Cell>
      <Table.Cell>string</Table.Cell>
      <Table.Cell>'stake'</Table.Cell>
      <Table.Cell>Sort order for gateway selection</Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell>filterCriteria</Table.Cell>
      <Table.Cell>object</Table.Cell>
      <Table.Cell>{}</Table.Cell>
      <Table.Cell>Additional filtering criteria</Table.Cell>
    </Table.Row>
  </Table.Body>
</Table>

## Configuration Examples

### Highest Operator Staked

```javascript
const provider = new NetworkGatewaysProvider({
  ario: ARIO.mainnet(),
  sortBy: 'operatorStake',
  sortOrder: 'desc',
  filter: (g: any) => g.stats.failedConsecutiveEpochs === 0; // filter out gateways that have recently failed!
})
```

## Comparison with Other Providers

<Table>
  <Table.Head>
    <Table.Row>
      <Table.Header>Feature</Table.Header>
      <Table.Header>NetworkGatewaysProvider</Table.Header>
      <Table.Header>StaticGatewaysProvider</Table.Header>
      <Table.Header>SimpleCacheGatewaysProvider</Table.Header>
    </Table.Row>
  </Table.Head>
  <Table.Body>
    <Table.Row>
      <Table.Cell>**Discovery**</Table.Cell>
      <Table.Cell>Dynamic from network</Table.Cell>
      <Table.Cell>Predefined list</Table.Cell>
      <Table.Cell>Cached from wrapped provider</Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell>**Performance**</Table.Cell>
      <Table.Cell>Medium (network calls)</Table.Cell>
      <Table.Cell>High (no network)</Table.Cell>
      <Table.Cell>High (cached)</Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell>**Reliability**</Table.Cell>
      <Table.Cell>High (real network data)</Table.Cell>
      <Table.Cell>Medium (static data)</Table.Cell>
      <Table.Cell>High (cached + fallback)</Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell>**Maintenance**</Table.Cell>
      <Table.Cell>Low (automatic updates)</Table.Cell>
      <Table.Cell>High (manual updates)</Table.Cell>
      <Table.Cell>Low (automatic + cached)</Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell>**Use Case**</Table.Cell>
      <Table.Cell>Production applications</Table.Cell>
      <Table.Cell>Development/Testing</Table.Cell>
      <Table.Cell>Production (performance)</Table.Cell>
    </Table.Row>
  </Table.Body>
</Table>

## Related Documentation

- **[Gateway Providers Overview](/wayfinder/core/gateway-providers)**: Compare all gateway providers
- **[StaticGatewaysProvider](/wayfinder/core/gateway-providers/static)**: Static gateway configuration
- **[SimpleCacheGatewaysProvider](/wayfinder/core/gateway-providers/cache)**: Caching wrapper
- **[Wayfinder Configuration](/wayfinder/core)**: Main wayfinder setup
- **[Routing Strategies](/wayfinder/routing-strategies)**: How gateways are selected
