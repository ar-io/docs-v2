import { CodeGroup } from '@/components/Code'


# Wayfinder

Wayfinder is AR.IO's client-side routing and verification solution that provides reliable access to Arweave data through decentralized gateways. It automatically handles gateway selection, request routing, failover, and cryptographic verification to ensure data integrity.

## Key Features

<Table
  containerClassName="mx-auto max-w-full"
  containerStyle={{ width: '100%' }}
  style={{ minWidth: '800px' }}
>
  <Table.Head>
    <Table.Row>
      <Table.Header>Feature</Table.Header>
      <Table.Header>Description</Table.Header>
      <Table.Header>Benefits</Table.Header>
      <Table.Header>Implementation</Table.Header>
    </Table.Row>
  </Table.Head>
  <Table.Body>
    <Table.Row>
      <Table.Cell className="font-semibold">Intelligent Routing</Table.Cell>
      <Table.Cell>
        Multiple routing strategies including fastest ping, preferred gateway
        with fallback, and round-robin
      </Table.Cell>
      <Table.Cell>
        Optimized performance, automatic failover, load distribution
      </Table.Cell>
      <Table.Cell>Configurable strategies with custom parameters</Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell className="font-semibold">Gateway Management</Table.Cell>
      <Table.Cell>
        Automatic gateway discovery through the AR.IO network or custom static
        configurations
      </Table.Cell>
      <Table.Cell>
        Dynamic gateway selection, network resilience, custom control
      </Table.Cell>
      <Table.Cell>Provider-based architecture with caching support</Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell className="font-semibold">Data Verification</Table.Cell>
      <Table.Cell>
        Cryptographic verification to ensure data integrity using hash
        comparison and Merkle proof validation
      </Table.Cell>
      <Table.Cell>
        Data integrity assurance, tamper detection, trust verification
      </Table.Cell>
      <Table.Cell>
        Pluggable verification strategies with event monitoring
      </Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell className="font-semibold">Event Monitoring</Table.Cell>
      <Table.Cell>
        Real-time events for verification progress, success, and failure
        scenarios
      </Table.Cell>
      <Table.Cell>
        Debugging insights, progress tracking, error handling
      </Table.Cell>
      <Table.Cell>Event emitter pattern with callback support</Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell className="font-semibold">Flexible Architecture</Table.Cell>
      <Table.Cell>
        Modular design allowing custom routing strategies, gateway providers,
        and verification methods
      </Table.Cell>
      <Table.Cell>
        Customizable behavior, extensible design, future-proof
      </Table.Cell>
      <Table.Cell>
        Interface-based components with dependency injection
      </Table.Cell>
    </Table.Row>
  </Table.Body>
</Table>

## Core Components

### Routing Strategies

<Table
  containerClassName="mx-auto max-w-full"
  containerStyle={{ width: '100%' }}
  style={{ minWidth: '800px' }}
>
  <Table.Head>
    <Table.Row>
      <Table.Header>Strategy</Table.Header>
      <Table.Header>Description</Table.Header>
      <Table.Header>Best Use Case</Table.Header>
      <Table.Header>Performance</Table.Header>
      <Table.Header>Configuration</Table.Header>
    </Table.Row>
  </Table.Head>
  <Table.Body>
    <Table.Row>
      <Table.Cell className="font-semibold">
        FastestPingRoutingStrategy
      </Table.Cell>
      <Table.Cell>Routes to the gateway with the lowest latency</Table.Cell>
      <Table.Cell>
        Performance-critical applications requiring minimum latency
      </Table.Cell>
      <Table.Cell>High (after initial ping overhead)</Table.Cell>
      <Table.Cell>Timeout, probe path, max retries, cache TTL</Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell className="font-semibold">
        PreferredWithFallbackRoutingStrategy
      </Table.Cell>
      <Table.Cell>Uses a preferred gateway with automatic fallback</Table.Cell>
      <Table.Cell>
        Applications with trusted gateway preferences but need reliability
      </Table.Cell>
      <Table.Cell>Medium (depends on preferred gateway)</Table.Cell>
      <Table.Cell>Preferred gateway URL, fallback strategy, timeout</Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell className="font-semibold">
        RoundRobinRoutingStrategy
      </Table.Cell>
      <Table.Cell>
        Distributes requests evenly across available gateways
      </Table.Cell>
      <Table.Cell>
        Load balancing across multiple gateways for sustained traffic
      </Table.Cell>
      <Table.Cell>Medium (consistent load distribution)</Table.Cell>
      <Table.Cell>No configuration required</Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell className="font-semibold">RandomRoutingStrategy</Table.Cell>
      <Table.Cell>Randomly selects from available gateways</Table.Cell>
      <Table.Cell>Simple load distribution without state management</Table.Cell>
      <Table.Cell>Medium (unpredictable variance)</Table.Cell>
      <Table.Cell>No configuration required</Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell className="font-semibold">StaticRoutingStrategy</Table.Cell>
      <Table.Cell>Always uses a single specified gateway</Table.Cell>
      <Table.Cell>
        Testing, development, or when gateway control is required
      </Table.Cell>
      <Table.Cell>Low to High (depends on chosen gateway)</Table.Cell>
      <Table.Cell>Single gateway URL</Table.Cell>
    </Table.Row>
  </Table.Body>
</Table>

### Gateway Providers

<Table
  containerClassName="mx-auto max-w-full"
  containerStyle={{ width: '100%' }}
  style={{ minWidth: '800px' }}
>
  <Table.Head>
    <Table.Row>
      <Table.Header>Provider</Table.Header>
      <Table.Header>Description</Table.Header>
      <Table.Header>Best Use Case</Table.Header>
      <Table.Header>Data Source</Table.Header>
      <Table.Header>Configuration</Table.Header>
    </Table.Row>
  </Table.Head>
  <Table.Body>
    <Table.Row>
      <Table.Cell className="font-semibold">NetworkGatewaysProvider</Table.Cell>
      <Table.Cell>
        Automatically discovers gateways from the AR.IO network
      </Table.Cell>
      <Table.Cell>
        Production applications requiring dynamic gateway discovery
      </Table.Cell>
      <Table.Cell>Live AR.IO network registry</Table.Cell>
      <Table.Cell>ARIO instance, sorting criteria, limit, filtering</Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell className="font-semibold">StaticGatewaysProvider</Table.Cell>
      <Table.Cell>Uses a predefined list of gateways</Table.Cell>
      <Table.Cell>
        Controlled environments, testing, or specific gateway requirements
      </Table.Cell>
      <Table.Cell>Hardcoded gateway list</Table.Cell>
      <Table.Cell>Array of gateway URLs</Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell className="font-semibold">
        SimpleCacheGatewaysProvider
      </Table.Cell>
      <Table.Cell>Caches gateway lists with configurable TTL</Table.Cell>
      <Table.Cell>Performance optimization to reduce network calls</Table.Cell>
      <Table.Cell>Wrapped provider with caching layer</Table.Cell>
      <Table.Cell>Underlying provider, cache TTL, refresh strategy</Table.Cell>
    </Table.Row>
  </Table.Body>
</Table>

### Verification Strategies

<Table
  containerClassName="mx-auto max-w-full"
  containerStyle={{ width: '100%' }}
  style={{ minWidth: '800px' }}
>
  <Table.Head>
    <Table.Row>
      <Table.Header>Strategy</Table.Header>
      <Table.Header>Description</Table.Header>
      <Table.Header>Security Level</Table.Header>
      <Table.Header>Performance Impact</Table.Header>
      <Table.Header>Best Use Case</Table.Header>
    </Table.Row>
  </Table.Head>
  <Table.Body>
    <Table.Row>
      <Table.Cell className="font-semibold">
        HashVerificationStrategy
      </Table.Cell>
      <Table.Cell>
        Verifies data integrity using SHA-256 hash comparison
      </Table.Cell>
      <Table.Cell>High (cryptographic hash verification)</Table.Cell>
      <Table.Cell>Low (single hash computation)</Table.Cell>
      <Table.Cell>Fast verification of known transaction data</Table.Cell>
    </Table.Row>
    <Table.Row>
      <Table.Cell className="font-semibold">
        DataRootVerificationStrategy
      </Table.Cell>
      <Table.Cell>Validates data using Arweave's Merkle tree proofs</Table.Cell>
      <Table.Cell>Very High (Merkle proof validation)</Table.Cell>
      <Table.Cell>Medium (Merkle tree computation)</Table.Cell>
      <Table.Cell>Maximum security for critical data verification</Table.Cell>
    </Table.Row>
  </Table.Body>
</Table>

## Quick Start

### Installation

Wayfinder is available in the beta version of the AR.IO SDK. Install it using your preferred package manager:

<CodeGroup title="Installation">
    ```bash {{title: "npm"}}
    npm install @ar.io/sdk@beta
    ```

    ```bash {{title: "yarn"}}
    yarn add @ar.io/sdk@beta --ignore-engines
    ```

    ```bash {{title: "pnpm"}}
    pnpm add @ar.io/sdk@beta
    ```

</CodeGroup>

### Usage Examples

<CodeGroup title="Quick Start">
    ```typescript {{title: "Basic Usage"}}
    import { Wayfinder } from '@ar.io/sdk/web';

    const wayfinder = new Wayfinder();

    // Fetch transaction data
    const response = await wayfinder.request('ar://YTB0dGJURWpqQ25iS2NaY1RPSi1TOUQxMmd3cGRFaHUzV2hiWnVlZ2o5WT0');
    const data = await response.text();
    ```

    ```typescript {{title: "Production Configuration"}}
    import {
        Wayfinder,
        NetworkGatewaysProvider,
        FastestPingRoutingStrategy,
        HashVerificationStrategy,
        ARIO
    } from '@ar.io/sdk/web';

    const wayfinder = new Wayfinder({
        gatewaysProvider: new NetworkGatewaysProvider({
            ario: ARIO.mainnet(),
            sortBy: 'operatorStake',
            limit: 10,
        }),
        routingStrategy: new FastestPingRoutingStrategy({
            timeoutMs: 1000,
        }),
        verificationStrategy: new HashVerificationStrategy(),
        strict: false, // Non-blocking verification
    });
    ```

</CodeGroup>
